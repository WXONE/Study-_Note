ORG 0000H

LJMP MAIN

ORG 000BH

LJMP ZT1

ORG 1000H

MAIN:MOV SP,#60H

MOV TH0,0F0H

MOV TL0,60H

SETB ET0

SETB TR0

SETB EA

LOOP:MOV A,R6

MOV B,#10

DIV AB

MOV DPTR,#TAB

MOV P2,#0

MOVC A,@A+DPTR

MOV P0,A

ACALL DELAY10MS

MOV P2,#1

MOV A,B

MOVC A,@A+DPTR

MOV P0,A

ACALL DELAY10MS

LJMP LOOP

DELAY10MS:

MOV 20H,#01H

DL1:

MOV 30H,#26H

DL0:

MOV 40H,#82H

DJNZ 40H,$

DJNZ 30H,DL0

DJNZ 20H,DL1

RET

ZT1:MOV P1,#0F0H

MOV A,P1

ANL A,#0F0H

XRL A,#0F0H

CJNE A,#0,ZT4

ZT3:MOV TH0,0F0H

MOV TL0,60H

RETI

ZT4:MOV R0,#00H

MOV R1,#00H

MOV R2,#00H

MOV R3,#00H

MOV A,#00H

DELAY:MOV R2,#05H

LOOP1:MOV R3,#0FAH

LOOP2:DJNZ R3,LOOP2

DJNZ R2,LOOP1

MOV A,P1

ANL A,#0F0H

MOV R0,A

XRL A,#0F0H

JNZ KEYSCAN1

LJMP ZT2

KEYSCAN1:MOV A,#00H

MOV P1,#0FH

MOV A,P1

ANL A,#0FH

MOV R1,A

XRL A,#0FH

JNZ NUM

LJMP ZT2

NUM:MOV A,R0

MOV B,R1

ORL A,B

MOV DPTR,#TAB

SJMP DISP0

DISP0:CJNE A,#0EEH,DISP1

MOV A,#00

MOV R6,A

LCALL ZT2

DISP1:CJNE A,#0EDH,DISP2

MOV A,#01

MOV R6,A

LCALL ZT2

DISP2:CJNE A,#0FBH,DISP3

MOV A,#02

MOV R6,A

LCALL ZT2

DISP3:CJNE A,#0E7H,DISP4

MOV A,#03

MOV R6,A

LCALL ZT2

DISP4:CJNE A,#0DEH,DISP5

MOV A,#04

MOV R6,A

LCALL ZT2

DISP5:CJNE A,#0DDH,DISP6

MOV A,#05

MOV R6,A

LCALL ZT2

DISP6:CJNE A,#0DBH,DISP7

MOV A,#06

MOV R6,A

LCALL ZT2

DISP7:CJNE A,#0D7H,DISP8

MOV A,#07

MOV R6,A

LCALL ZT2

DISP8:CJNE A,#0BEH,DISP9

MOV A,#08

MOV R6,A

LCALL ZT2

DISP9:CJNE A,#0BDH,DISPA

MOV A,#09

MOV R6,A

LCALL ZT2

DISPA:CJNE A,#0BBH,DISPB

MOV A,#10

MOV R6,A

LCALL ZT2

DISPB:CJNE A,#0B7H,DISPC

MOV A,#11

MOV R6,A

LCALL ZT2

DISPC:CJNE A,#7EH,DISPD

MOV A,#12

MOV R6,A

LCALL ZT2

DISPD:CJNE A,#7DH,DISPE

MOV A,#13

MOV R6,A

LCALL ZT2

DISPE:CJNE A,#7BH,DISPF

MOV A,#14

MOV R6,A

LCALL ZT2

DISPF:CJNE A,#77H,ZT2

MOV A,#15

MOV R6,A

LCALL ZT2

ZT2:MOV TH0,0F0H

MOV TL0,60H

RETI

TAB:DB 3FH,06H,5BH,4FH,66H,6DH,7DH,07H,7FH,6FH,77H,7CH,39H,5EH,79H,71H

END