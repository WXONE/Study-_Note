# 对象的生存期

对象和变量的生存期都分为静态生存期和动态生存期，所谓静态生存期是指他的生存期和程序的整个运行期间是一致的，比如说具有文件作用域的标识符，变量名、对象名都具有静态生存期，只有当整个程序运行结束的时候他才消失。

## 静态生存期

* 这种生存期与程序的运行期相同
* 在文件作用域中声明的对象具有这种生存期
* 在函数内部声明静态生存期对象，要冠以关键字static

## 动态生存期

* 开始于程序执行到声明点，结束于最内层的命名该标识符的作用域结束处
* 块作用域中声明的，没有用static修饰的对象是动态生存期的对象（习惯称局部生存对象）

## 例：变量的生存期与可见性

```c++
#include<iostream>

using namespace std;

int i = 1; // i 为全局变量，具有静态生存期。

void other() {

static int a = 2;

static int b;

// a,b为静态局部变量，具有全局寿命，局部可见。

//只第一次进入函数时被初始化。

int c = 10; // C为局部变量，具有动态生存期，

//每次进入函数时都初始化。

a += 2; i += 32; c += 5;

cout<<"---OTHER---\n";

cout<<" i: "<<i<<" a: "<<a<<" b: "<<b<<" c: "<<c<<endl;

b = a;

}


int main() {

static int a;//静态局部变量，有全局寿命，局部可见。

int b = -10; // b, c为局部变量，具有动态生存期。

int c = 0;

cout << "---MAIN---\n";

cout<<" i: "<<i<<" a: "<<a<<" b: "<<b<<" c: "<<c<<endl;

c += 8; other();

cout<<"---MAIN---\n";

cout<<" i: "<<i<<" a: "<<a<<" b: "<<b<<" c: "<<c<<endl;

i += 10; other();

return 0;

}
```

```c++
---MAIN---

i: 1 a: 0 b: -10 c: 0

---OTHER---

i: 33 a: 4 b: 0 c: 15

---MAIN---

i: 33 a: 0 b: -10 c: 8

---OTHER---

i: 75 a: 6 b: 4 c: 15
```

